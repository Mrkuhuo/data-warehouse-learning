## 开源不易，请各位朋友点个 ***★star★*** 支持一下，非常感谢~

[【 Github地址：https://github.com/Mrkuhuo/data-warehouse-learning 】](https://github.com/Mrkuhuo/data-warehouse-learning)

[【 Gitee 地址：https://gitee.com/wzylzjtn/data-warehouse-learning 】](https://gitee.com/wzylzjtn/data-warehouse-learning)

[【 推荐开发平台：https://github.com/642933588/jiron-cloud 】](https://github.com/642933588/jiron-cloud)

[【 Flink面试题答案 】](https://t.zsxq.com/DKAQ3)

[【 FlinkSQL面试精讲 】](https://t.zsxq.com/GyF7n)

[【 Flink源码分析 】](https://t.zsxq.com/4e96L)

[【 Flink数据倾斜优化 】](https://t.zsxq.com/uMt82)

[【 Paimon面试题 】](https://t.zsxq.com/tfjLv)

[【 Doris面试精华 】](https://t.zsxq.com/PkNd1)

[【 StarRocks面试题 】](https://t.zsxq.com/iQK21)

[【 Hive面试题 】](https://t.zsxq.com/tdt8e)

[【 Spark面试题 】](https://t.zsxq.com/WwB9a)

[【 Paimon Join专项面试题 】](https://t.zsxq.com/femkb)

[【 Iceberg面试题 】](https://t.zsxq.com/r9mCw)

[【 Hudi面试题 】](https://t.zsxq.com/FIbGf)

[【 数据仓库面试题 】](https://t.zsxq.com/DLg8y)

[【 Clickhouse 面试题 】](https://t.zsxq.com/LegAQ)

[【 ElasticSearch面试题 】](https://t.zsxq.com/FmCvD)

[【 kafka面试题 】](https://t.zsxq.com/6KhyV)

[【 Hbase 面试题 】](https://t.zsxq.com/KCHy1)

[【 Zookeeper 面试题 】](https://t.zsxq.com/aXyFm)

[【 数仓最新文档 】](https://t.zsxq.com/7zQQH)

[【 Flink学习文档v1.0 】](https://t.zsxq.com/NWSIR)

[【 Doris学习手册 】](https://t.zsxq.com/FDDIz)

[【 Dinky最新指南 】](https://t.zsxq.com/04NdO)

[【 Flink 学习文档V2.0 】](https://t.zsxq.com/d4cDB)

[【 Paimon 学习文档V2.0 】](https://t.zsxq.com/5N2Pc)

[【 Fluss 学习文档V1.0 】](https://t.zsxq.com/wH86T)

[【 Flink2.0 ForSt状态后端 学习文档V1.0 】](https://t.zsxq.com/BIObu)

[【 数据治理指南 V1.0 】](https://t.zsxq.com/JOGjG)

[【 Iceberg学习文档 V1.0 】](https://t.zsxq.com/oq0Ad)

[【 Flink并行度优化指南 V1.0 】](https://t.zsxq.com/pgNNS)

[【 Iceberg学习文档 V2.0 】](https://t.zsxq.com/qC8iJ)

[【 Flink反压问题解决方案 V1.0 】](https://t.zsxq.com/vXQ8Q)

[【 Hudi学习文档 V1.0 】](https://t.zsxq.com/gb2Pl)

[【 数据湖选型 V1.0 】](https://t.zsxq.com/BB3LH)

[【 数仓建设方案 V1.0 】](https://t.zsxq.com/CzZiw)

[【 Spark Shuffle阶段详解 V1.0 】](https://t.zsxq.com/ZoB3a)

[【 大数据计算引擎发展历史】](https://t.zsxq.com/HlliS)

[【 Flink可以优化的方方面面 V1.0 】](https://t.zsxq.com/yaCFq)

[【 Paimon可以优化的方方面面 V1.0 】](https://t.zsxq.com/Vp9yu)

[【 Flink内存管理 V1.0 】](https://t.zsxq.com/sRhyo)

[【 Doris可以优化的方方面面 V1.0 】](https://t.zsxq.com/BcKVy)

[【 StarRocks可以优化的方方面面 V1.0 】](https://t.zsxq.com/YXMXf)

[【 Flink反压排查思路 V1.0 】](https://t.zsxq.com/APrl6)

[【 Paimon QPS太低调优思路 V1.0 】](https://t.zsxq.com/IeKVr)

[【 Flink100G级状态如何调优思路 V1.0 】](https://t.zsxq.com/tTE1X)

[【 Iceberg可以优化的方方面面 V1.0 】](https://t.zsxq.com/36gjm)

[【 Spark Checkpoint 和 Flink Checkpoint有什么区别  V1.0 】](https://t.zsxq.com/IbKvN)

[【 Spark可以优化的方方面面 V1.0 】](https://t.zsxq.com/rxIsz)

[【 Spark RDD优化方案 V1.0 】](https://t.zsxq.com/MgSfu)

[【 Kafka可以优化的方方面面 V1.0 】](https://t.zsxq.com/g2ndS)

[【 Paimon自动分区和快照清理原理 V1.0 】](https://t.zsxq.com/LAYJs)

[【 Paimon学习文档十一章 V1.0 】](https://t.zsxq.com/os0Ee)

[【 Iceberg学习文档十一章 V1.0 】](https://t.zsxq.com/0j01g)

[【 Spark学习文档十一章  V1.0 】](https://t.zsxq.com/PpsmT)

[【 Flink2.0学习文档十二章 V1.0 】](https://t.zsxq.com/3Wl1Z)

[【 基于Flink + Paimon的全流程数仓建设实践指南 V1.0 】](https://t.zsxq.com/RCYLl)

[【 Flink1.19 + Paimon1.2构建实时数仓教程文档 V1.0 】](https://t.zsxq.com/nJazP)

[【 K8s学习文档 V1.0 】](https://t.zsxq.com/MgFbT)

[【 Doris 学习文档 V1.0 】](https://t.zsxq.com/kuEDJ)

[【 Apache Doris全方位优化指南 】](https://t.zsxq.com/NfAhA)

[【 Doris+Paimon构建湖仓一体方案 】](https://t.zsxq.com/scQuV)

[【 Flink SQL 四种 Join 方式详解：原理、场景与实战 】](https://t.zsxq.com/6ECBG)

[【 Flink SQL + Paimon 数据湖建设全流程详解 】](https://t.zsxq.com/RCYLl)

[【 使用Kubernetes提交Flink任务详解 】](https://t.zsxq.com/sScKG)

[【 使用YARN提交Flink任务详解 】](https://t.zsxq.com/EEcUP)

[【 结合Flink + GitLab + K8s实现代码变更追踪与自动化部署 】](https://t.zsxq.com/Lzqfp)

[【 Kubernetes详细学习路线图 】](https://t.zsxq.com/H18YP)

[【 基于Kubernetes的湖仓一体高可用架构部署指南 】](https://t.zsxq.com/7JPFp)

[【 Flink 运维全指南：监控、问题排查、优化与实战 】](https://t.zsxq.com/naKp1)

[【 数仓建设规范 】](https://t.zsxq.com/1lZec)

[【 如何系统调研一个大数据组件 】](https://t.zsxq.com/olpRH)

# 那些年，我们一起追过的阿里面试题 🚀

嘿，各位奋斗的小伙伴们！

还记得那些挑灯夜读的日子吗？为了心仪的阿里面试，我们像考古学家一样，一遍又一遍地翻阅着数据仓库、Hadoop、Hive的各种面试题。那会儿，背八股文都快背出花来了，MySQL索引都能倒着背，数据仓库的分层架构更是如数家珍。

说实话，现在回想起来还挺有意思的。那种既紧张又期待的心情，就像第一次见暗恋对象一样，手心冒汗，但又充满希望。面试官问起"说说你对数据仓库的理解"的时候，那可真是重头戏啊，恨不得把书本上的每一个字都倒背如流！

在这个仓库里，我想和大家分享一下这段学习历程。不过，可不只是简单地列举面试题哦，而是要把这些知识点串成一个个有趣的故事。毕竟，人生不就是在不断学习中寻找乐趣吗？

来吧，让我们一起回顾那些奋斗的日子，顺便也帮助正在准备面试的朋友们，少走点弯路~ 😉

---

## 1 介绍

"《实时/离线数仓实战》是一个以电商系统为基础，围绕电商业务指标统计需求而构建的数仓项目。该项目涵盖了基于Doris、Piamon、Hudi和Iceberg的离线数仓和实时数仓（数据湖）的构建。两种场景在数据处理逻辑上保持一致，但采用了不同的技术实现，为数仓建设提供了多样化的思路。
## 2 技术架构

![技术架构](src/main/java/org/bigdatatechcir/images/jiagou1.png)

电商数仓项目（实时/离线）的技术架构由四个关键部分组成：

1. 数据源模块：本模块通过 **JAVA** 编写的代码来生成电商业务数据，并将这些数据写入 **MySQL** 数据库。同时，生成的用户日志数据被写入 **Kafka** 消息队列。模块支持在配置文件中设定数据生成的日期，以满足不同时间点的数据需求。

2. 数据采集模块：利用 **Dinky** 开发的 **FlinkSQL** 代码，消费 **Kafka** 中的用户日志数据，并将其写入 **Doris** 、**Paimon** 、 **Hudi** 和 **Iceberg** 的在线数据存储（ODS）层。此外，使用 **DolphinScheduler** 配置 **SeaTunnel** 任务，以同步 **MySQL** 中的业务数据到 **Doris** 的ODS层。**FlinkSQL/CDC** 技术则用于从 **Kafka** 和 **MySQL** 采集数据，并将它们分别写入 **Paimon** 、**Hudi** 和 **Iceberg** 的ODS层。

3. 数仓模块：遵循行业标准的ODS（操作数据存储）-> DWD（数据仓库明细层）/ DIM（维度数据层）-> DWS（数据服务层）-> ADS（应用数据存储）的四级数据分层架构。数据在**Doris** 、**Paimon**、**Hudi** 和 **Iceberg** 中通过批量和实时两种调度方式进行有效流转。

4. 数据可视化：ADS层和DWS层的数据可以利用 **SuperSet** 和 **DataRT** 工具进行报表和数据大屏的制作与展示，以直观地呈现数据洞察。

## 3 软件版本

| 软件               | 版本     | 安装包        | 对应依赖包                                                                                                                                      |
|------------------|--------|------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| Zookeeper        | 3.9.1  | apache-zookeeper-3.9.1-bin.tar.gz       |                                                                                                                                            |
| Kafka            | 3.6.1  | kafka_2.12-3.6.1.tgz       |                                                                                                                                            |
| Seatunnel        | 2.3.3  | apache-seatunnel-2.3.3-bin.tar.gz       | seatunnel-hadoop3-3.1.4-uber-2.3.3-optional.jar                                                                                            |
| Dolphinscheduler | 3.2.0  | apache-dolphinscheduler-3.2.0-bin.tar.gz       | mysql-connector-java-8.0.16.jar                                                                                                            |
| Doris            | 2.0.4  | apache-doris-2.0.4-bin-x64.tar.gz       |                                                                                                                                            |
| Flink            | 1.18.1 | flink-1.18.1-bin-scala_2.12.tgz       | flink-sql-connector-mysql-cdc-2.4.2.jar <br> flink-sql-connector-kafka-3.1.0-1.18.jar <br> flink-sql-connector-hive-3.1.3_2.12-1.19.0.jar <br> flink-connector-jdbc-3.2.0-1.19.jar |
| Iceberg          | 1.5.2  | iceberg-flink-runtime-1.18-1.5.2.jar       |                                                                                                                                            |
| Hudi             | 0.15.0 | hudi-flink1.18-bundle-0.15.0.jar       |                                                                                                                                            |
| Paimon           | 0.8    | paimon-flink-1.18-0.8-20240301.002155-30.jar       | flink-shaded-hadoop-2-uber-2.7.5-9.0.jar                                                                                                   |
| Dinky            | 1.0.0  | dinky-release-1.18-1.0.0-rc4.tar.gz       |                                                                                                                                            |
| Hadoop           | 3.1.3  | hadoop-3.1.3.tar.gz       |                                                                                                                                            |
| Hive             | 3.1.3  | apache-hive-3.1.3-bin.tar.gz       | paimon-hive-connector-3.1-0.7.0-incubating.jar  <br> iceberg-hive-runtime-1.5.2.jar  <br> hudi-hadoop-mr-bundle-0.15.0.jar                 |
| Maven            | 3.9.6  | apache-maven-3.9.6-bin.tar.gz       |                                                                                                                                            |
| Centos           | 8      | CentOS-8.5.2111-x86_64-dvd1.iso       |                                                                                                                                            |
| OpenJDK          | 8      | openlogic-openjdk-8u402-b06-linux-x64.tar.gz       |                                                                                                                                            |

# 通用部分

#### 1) 组件安装

![安装文档](src/main/java/org/bigdatatechcir/images/anzhuang.jpg)

#### 2) 模拟数据生成

![模拟数据生成](src/main/java/org/bigdatatechcir/images/monishuju.png)

生成业务库数据如下图所示：

![业务库数据](src/main/java/org/bigdatatechcir/images/yewushuju.png)

生成用户日志数据如下图所示：

![用户日志数据](src/main/java/org/bigdatatechcir/images/yonghurizhishuju.png)

# 离线数仓建设部分(Doris)

涉及组件：**Kafka** + **Flink** + **Doris** + **Seatunnel** + **Dolphinscheduler**

#### 1) 数据采集

**Kafka** 数据通过 **Flink** 接入 **Doris**

![Kafka 数据接入](src/main/java/org/bigdatatechcir/images/flink.png)

**MySQL** 数据通过 **SeaTunnel** 接入 **Doris**

![MySQL 数据接入](src/main/java/org/bigdatatechcir/images/seatunnel.png)

#### 2) **Doris ODS** 层建设

数据采集进 **Doris ODS** 层，实现效果如下图所示：

![Doris ODS层建设](src/main/java/org/bigdatatechcir/images/ods.png)

#### 3) **Doris DIM** 层建设

开发 **DorisSQL** 进行 **DIM** 层数据处理

![Doris DIM层处理逻辑](src/main/java/org/bigdatatechcir/images/dim.png)

**DIM** 层数据实现效果如下图：

![Doris DIM层数据库](src/main/java/org/bigdatatechcir/images/dwddatabase.png)

#### 4) **Doris DWD** 层建设

开发 **DorisSQL** 进行 **DWD** 层数据处理

![Doris DWD层处理逻辑](src/main/java/org/bigdatatechcir/images/dwd.png)

**DWD** 层数据实现效果如下图：

![Doris DWD层数据库](src/main/java/org/bigdatatechcir/images/dimdatabase.png)

#### 5) **Doris DWS** 层建设

开发 **DorisSQL** 进行 **DWS** 层数据处理

![Doris DWS层处理逻辑](src/main/java/org/bigdatatechcir/images/dws.png)

**DWS** 层数据实现效果如下图：

![Doris DWS层数据库](src/main/java/org/bigdatatechcir/images/dwsdatabase.png)

#### 6) **Doris ADS** 层建设

开发 **DorisSQL** 进行 **ADS** 层数据处理

![Doris ADS层处理逻辑](src/main/java/org/bigdatatechcir/images/ads.png)

**ADS** 层数据实现效果如下图：

![Doris ADS层数据库](src/main/java/org/bigdatatechcir/images/adsdatabase.png)

#### 7) 任务编排

最终的任务概览如下图所示

![Doris 任务概览](src/main/java/org/bigdatatechcir/images/allrenwu.png)

任务编排效果如下图所示

![Doris 任务概览](src/main/java/org/bigdatatechcir/images/bianpai.png)

#### 8) 数据展示

![大屏](src/main/java/org/bigdatatechcir/images/daping1.png)

# 实时数仓（数据湖）建设部分（Paimon/Hudi/Iceberg）

涉及组件：**Kafka** + **Flink(CDC/SQL/UDF)** + **Paimon/Hudi/Iceberg** + **Hive** + **Dinky**

#### 1) **Paimon ODS** 层建设

**Kafka** 数据通过 **FlinkSQL** 接入 **Paimon/Hudi/Iceberg** ,实际数据落到 **Hive**

**MySQL** 数据通过 **FlinkCDC** 接入 **Paimon/Hudi/Iceberg** ,实际数据落到 **Hive**

![Kafka/MySQL 数据接入](src/main/java/org/bigdatatechcir/images/paimon%20ods.png)

数据采集进 **Paimon ODS** 层，实现效果如下图所示：

![Paimon ODS层建设](src/main/java/org/bigdatatechcir/images/hiveods.png)

#### 2) **Paimon DWD** 层建设

开发 **FlinkSQL** 进行 **DWD** 层数据处理

![Paimon DWD层建设](src/main/java/org/bigdatatechcir/images/paimondwd.png)

**DWD** 层数据实现效果如下图：

![Paimon DWD层建设](src/main/java/org/bigdatatechcir/images/hivedwd.png)

#### 3) **Paimon DIM** 层建设

开发 **FlinkSQL** 进行 **DIM** 层数据处理

![Paimon DIM层建设](src/main/java/org/bigdatatechcir/images/paimondim.png)

**DIM** 层数据实现效果如下图：

![Paimon DIM层建设](src/main/java/org/bigdatatechcir/images/hivedim.png)

#### 4) **Paimon DWS** 层建设

开发 **FlinkSQL** 进行 **DWS** 层数据处理

![Paimon DWS层建设](src/main/java/org/bigdatatechcir/images/paimondws.png)

**DWS** 层数据实现效果如下图：

![Paimon DWS层建设](src/main/java/org/bigdatatechcir/images/hivedws.png)

#### 5) **Paimon ADS** 层建设

开发 **FlinkSQL** 进行 **ADS** 层数据处理

![Paimon ADS层建设](src/main/java/org/bigdatatechcir/images/paimonads.png)

**ADS** 层数据实现效果如下图：

![Paimon ADS层建设](src/main/java/org/bigdatatechcir/images/hiveads.png)

#### 6) **Doris Catalog** 连接 **Paimon** + **DataRT** 进行数据展示

![大屏](src/main/java/org/bigdatatechcir/images/daping2.png)

